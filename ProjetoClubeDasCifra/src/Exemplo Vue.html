<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<body>

<div id="layout">
    <table>
        <tr>
            <th style="width: 200px;">CÃ³digo</th>
            <th style="width: 200px;">Hora</th>
            <th style="width: 200px;">CentroCusto</th>
        </tr>


        <tr v-for="entry in entries">

            <td>
                {{entry.code}}
            </td>

            <td>
                {{entry.datetime.getHours()}}:{{entry.datetime.getMinutes()}}

                {{entry.datetime.getDate()}}/{{entry.datetime.getMonth()}}/{{entry.datetime.getFullYear()}}
            </td>

            <td>
                {{entry.prodLine}}
            </td>

        </tr>
    </table>
    <button id="ImpBtn" onclick=" location.href ='/api/export'">importar tabela</button>
</div>

</body>
<script>

    function refreshPage(timeoutPeriod)
    {
        setTimeout("location.reload(true);",timeoutPeriod);
    }
    window.onload = refreshPage(40000);




    let vm = new Vue({
        el: '#layout',
        data: {
            entries: []
        },
        mounted: async function () {
            let result = await fetch('/api/list');
            var data = await result.json();

            this.entries = data.map(x => ({...x, datetime: new Date(x.datetime)}))
        }


    });




</script>

</html>